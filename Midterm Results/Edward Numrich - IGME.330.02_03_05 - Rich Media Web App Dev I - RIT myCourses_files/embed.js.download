!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="bdf3c29b-d37a-4a8b-96b6-ad09de05773a",e._sentryDebugIdIdentifier="sentry-dbid-bdf3c29b-d37a-4a8b-96b6-ad09de05773a")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"production_v1.7.413_1_d129c96"},(()=>{var e={3633:e=>{e.exports=function(){var e=function(e){return"function"===typeof e},t=Math.pow(2,53)-1,n=function(e){var n=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(n,0),t)},i=function(e){var t=e.next();return!Boolean(t.done)&&t};return function(t){"use strict";var o,a,r,s=this,d=arguments.length>1?arguments[1]:void 0;if("undefined"!==typeof d){if(!e(d))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2])}var c=function(t,n){if(null!=t&&null!=n){var i=t[n];if(null==i)return;if(!e(i))throw new TypeError(i+" is not a function");return i}}(t,function(e){if(null!=e){if(["string","number","boolean","symbol"].indexOf(typeof e)>-1)return Symbol.iterator;if("undefined"!==typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in e)return Symbol.iterator;if("@@iterator"in e)return"@@iterator"}}(t));if(void 0!==c){a=e(s)?Object(new s):[];var l,u,w=c.call(t);if(null==w)throw new TypeError("Array.from requires an array-like or iterable object");for(r=0;;){if(!(l=i(w)))return a.length=r,a;u=l.value,a[r]=d?d.call(o,u,r):u,r++}}else{var g=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var m,h=n(g.length);for(a=e(s)?Object(new s(h)):new Array(h),r=0;r<h;)m=g[r],a[r]=d?d.call(o,m,r):m,r++;a.length=h}return a}}()}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(3633),t=n.n(e);const i=window.document.currentScript;if(!i)throw new Error("FT: Could not find embed script");const o=i.getAttribute("position"),a=i.getAttribute("position-x"),r=i.getAttribute("position-y"),s=i.getAttribute("offset-x")||"",d=i.getAttribute("offset-y")||"",c=/^[-]?\d+(px|rem)$/,l=c.test(s)?"calc(".concat(s," - 28px)"):"0",u=c.test(d)?"calc(".concat(d," - 28px)"):"0",w="top"===r?"top":"bottom",g="\n    border:none;\n    overflow:hidden;\n    position:fixed;\n    z-index:999999;\n    -webkit-mask-image: -webkit-radial-gradient(white, black);\n    width: 0;\n    height: 0;\n    max-height: 800px;\n\n    ".concat("left"===o||"left"===a?"left":"right",": ").concat(l,";\n    ").concat(w,": ").concat(u,";\n"),m="\n  width: 100%;\n  height: 100%;\n  max-height: initial;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n";function h(){var e;return(null===(e=window.location.ancestorOrigins)||void 0===e?void 0:e[0])||document.referrer}let f=h()?new URL(h()).origin:"*";const p=e=>{var t,n,i,o,a,r,s,d,c,l,u,w,g;null===(t=window.parent)||void 0===t||null===(n=t.postMessage)||void 0===n||n.call(t,e,f),null===(i=window)||void 0===i||null===(o=i.webkit)||void 0===o||null===(a=o.messageHandlers)||void 0===a||null===(r=a.widgetObservable)||void 0===r||null===(s=r.postMessage)||void 0===s||s.call(r,JSON.stringify(e)),null===(d=window)||void 0===d||null===(c=d.JSBridge)||void 0===c||null===(l=c.postMessage)||void 0===l||l.call(c,JSON.stringify(e)),null===(u=window)||void 0===u||null===(w=u.ReactNativeWebView)||void 0===w||null===(g=w.postMessage)||void 0===g||g.call(w,JSON.stringify(e))};async function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=e();return n||(t>4?null:(await(i=2**t*600,new Promise((e=>setTimeout(e,i)))),v(e,t+1)));var i}const b=window.matchMedia("(max-width: 480px)"),y=window.matchMedia("(max-height: 700px)"),E=window.document,C=E.currentScript,S="true"===(null===C||void 0===C?void 0:C.getAttribute("hide-ft-after-zd")),A=null===C||void 0===C?void 0:C.getAttribute("hide-intercom-widget");let _="",k=!1;function q(e){return e instanceof Error?e.message:String(e)}function L(){let e=E.querySelector('iframe[title="Button to launch messaging window"]');return null===e&&(e=E.querySelector('iframe[title="Button to launch messaging window, conversation in progress"]')),null===e&&(e=E.querySelector('iframe[id="launcher"]')),e}const T=()=>{const e=E.getElementById("forethought-chat"),t=null===C||void 0===C?void 0:C.getAttribute("src"),n=t?new URL(t).origin:"*",i=t=>{var i;e&&(null===(i=e.contentWindow)||void 0===i||i.postMessage(t,n))},o=function(e,t){i({event:"addChatTranscript",forethoughtConversationID:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,helpdeskConversationId:t,integration:e})},a=E.createElement("style");a.id="ft-salesforce-style";const r=()=>{a.innerHTML="",E.body.appendChild(a)},s=()=>{a.innerHTML=".embeddedServiceHelpButton { display: none !important;}",E.body.appendChild(a)},d=()=>{let e=!0,t=0;const n=()=>{if(e&&t<=10){e=!1;const i=E.getElementsByClassName("chasitorText")[0];i?(i.value=_,function(e,t,n){if("createEvent"in E){const i=E.createEvent("HTMLEvents");i.keyCode=n,i.initEvent(t,!1,!0),e.dispatchEvent(i)}}(i,"keydown",13)):(e=!0,t++,setTimeout(n,1e3))}};n()},c=()=>{s(),window.Forethought("widget","show")};window.embedded_svc&&(window.embedded_svc.addEventHandler("afterDestroy",c),k=!0);const l=E.createElement("style");l.id="ft-zd-style";const u=()=>{try{window.zE&&window.zE("webWidget","hide")}catch{}try{window.zE&&window.zE("messenger","hide")}catch{}l.innerHTML='\n      iframe[id="launcher"] { display: none !important;}\n      iframe[title="Button to launch messaging window"] { display: none !important;}\n      iframe[title="Button to launch messaging window, conversation in progress"] { display: none !important;}\n      iframe[title="Message from company"] { display: none !important;}\n      iframe[data-product="web_widget"] { display: none !important ;}\n      ',E.body.appendChild(l)},w=()=>{try{window.zE&&window.zE("webWidget","show")}catch{}try{window.zE&&window.zE("messenger","show")}catch{}l.innerHTML='\n      iframe[id="launcher"] { display: block !important;}\n      iframe[title="Button to launch messaging window"] { display: block !important;}\n      iframe[title="Button to launch messaging window, conversation in progress"] { display: block !important;}\n      iframe[title="Message from company"] { display: block !important;}\n      iframe[data-product="web_widget"] { display: block !important;}\n    ',E.body.appendChild(l)},g=()=>{if(!window.zE)return i({event:"noZendeskObjectDetected"}),[];try{return window.zE("webWidget:get","chat:departments")||[]}catch{return[]}},m=e=>{if(!e)return;let t=!1;try{t=e("webWidget:get","chat:isChatting")}catch{}return"boolean"===typeof t&&(((e,t)=>{try{t?(w(),e("webWidget","open"),window.Forethought("widget","hide")):u(),e("webWidget:on","chat:end",(function(){e&&(window.Forethought("widget","close"),S||(e("webWidget","close"),u(),window.Forethought("widget","show")))}))}catch{return}})(e,t),!0)},h=E.createElement("style");h.id="ft-kustomer-style";const f=E.createElement("style");f.id="ft-intercom-style";const b=e=>{let{autoSendConfig:t,email:n,identityVerificationEnabled:i,name:o,question:a,userid:r}=e;const s={...window.intercomSettings,hide_default_launcher:!1};i||(o&&(s.name=o),r&&(s.user_id=r),n&&(s.email=n)),window.Intercom("update",s),f.innerHTML="",E.body.appendChild(f),a?(window.Intercom("showNewMessage",a),t&&t.should_auto_send_message&&setTimeout((()=>{const e=E.querySelector('iframe[name="intercom-messenger-frame"]');if(e){var t;const n=null===(t=e.contentWindow)||void 0===t?void 0:t.document.querySelector(".intercom-composer-send-button");n&&n.click()}}),t.auto_send_timeout)):window.Intercom("show")},y=E.createElement("style");y.id="ft-snapengage-style";const T=()=>{window.SnapEngage&&window.SnapEngage.hideButton(),y.innerHTML="#designstudio-button { display: none !important;}",E.body.appendChild(y)},W=e=>{var t;let{additionalParameters:n,email:i,name:o,question:a}=e;i&&window.SnapEngage.setUserEmail(i,!0),o&&window.SnapEngage.setUserName(o),window.SnapEngage&&window.SnapEngage.showButton(),y.innerHTML="#designstudio-button { display: block !important;}",E.body.appendChild(y),window.SnapEngage.startLink();const r=null===(t=E.getElementById("designstudio-iframe").contentWindow)||void 0===t?void 0:t.document.getElementById("message-textarea");r&&a&&(r.value=a),null!==n&&void 0!==n&&n.transcript&&window.SnapEngage&&window.SnapEngage.setCallback("ChatMessageReceived",(function(e){const t=()=>{let e=!0;try{e&&(e=!1,window.SnapEngage.sendTextToChat(null===n||void 0===n?void 0:n.transcript))}catch(i){e=!0,window.SnapEngage.setCallback("ChatMessageReceived",""),setTimeout(t,5e3)}},i=null===n||void 0===n?void 0:n.bot_alias_list;i&&e&&!i.includes(e)&&(t(),window.SnapEngage.setCallback("ChatMessageReceived",""))})),window.SnapEngage&&window.SnapEngage.setCallback("Close",(function(){T(),window.Forethought("widget","show")}))},z=e=>{let{email:t,name:n,question:i}=e;window.drift.on("ready",(function(){const e={};t&&(e.email=t),n&&(e.nickname=n),window.drift.api.setUserAttributes(e)})),i&&window.drift.api.goToNewConversation(i),window.drift&&window.drift.api.openChat()},I=(e,t)=>{(e=>{switch(e){case"hide":return void window.Forethought("widget","hide");case"minimize":return void window.Forethought("widget","close");default:;}})(e),p({...t,event:"forethoughtWidgetGenericHandoff"})},M=E.createElement("style");M.id="ft-brand-embassy-style";const x=e=>{let{autoStartSession:t,customFields:n,name:i,question:o}=e;if(i&&window.brandembassy("setCustomerName",i),n)for(const[a,r]of Object.entries(n))window.brandembassy("setCustomField",a,r);window.brandembassy("hideFirstSentMessage",!1),window.brandembassy("sendFirstMessageAutomatically",o),M.innerHTML="#be-frame {display: block !important;}",E.body.appendChild(M),window.brandembassy("openChatWindow"),t&&window.brandembassy("autoStartSession")},F=E.createElement("style");F.id="ft-gorgias-style";const P=e=>{let{question:t}=e;F.innerHTML="#gorgias-chat-container {display: block !important;}",E.body.appendChild(F),window.GorgiasChat.hideChat(!1),window.GorgiasChat.open(),window.GorgiasChat.sendMessage(t)},R=E.createElement("style");R.id="ft-freshchat-style";const O=e=>{let{conversationProperties:t,email:n,firstName:i,forethoughtConversationID:a,lastName:r,question:s,tags:d}=e;const c={};(e=>{window.fcWidget.on("message:sent",(function(t){o("freshchat",t.message.conversationAlias,e),window.fcWidget.off("message:sent")}))})(a),i&&(c.firstName=i),r&&(c.lastName=r),n&&(c.email=n),Object.keys(c).length&&window.fcWidget.user.setProperties(c),d&&window.fcWidget.setTags(d),t&&Object.keys(t).length&&window.fcWidget.conversation.setConversationProperties({...t}),R.innerHTML="#fc_frame {display: block !important;}",E.body.appendChild(R),window.fcWidget.open({replyText:s})},H=E.createElement("style");H.id="ft-salesforce-messaging-style";const N=e=>{var t;let{hiddenFields:n}=e;window.embeddedservice_bootstrap.prechatAPI.setHiddenPrechatFields(n),H.innerHTML="#embedded-messaging {display: block !important;}",E.body.appendChild(H),null===(t=E.getElementById("embeddedMessagingConversationButton"))||void 0===t||t.click()},B=E.createElement("style");B.id="ft-live-chat-style";const D=()=>{window.LiveChatWidget?window.LiveChatWidget.call("hide"):window.LC_API&&window.LC_API.hide_chat_window(),B.innerHTML="#chat-widget-container {display: none !important;}",E.body.appendChild(B)},V=()=>{B.innerHTML="#chat-widget-container {display: block !important;}",E.body.appendChild(B)},j=()=>{const e=window.LC_API;return!!e&&(!!e.is_loaded()&&(()=>{const e=window.LC_API;return!!e&&!!e.chat_running()&&(window.Forethought("widget","hide"),e.open_chat_window(),V(),!0)})())},U=e=>{var t;let{additionalParameters:n,department:i,email:a,featureFlags:s,integration:d,isCurrentTabPrimary:l,name:m,question:f,widgetOption:p}=e;_=f;const v=null===s||void 0===s?void 0:s.includes("next_avail_dept_routing");switch(d){case"zendesk_messaging":const e=L();if(!window.zE||!e)return G({error:"window.zE is undefined or Zendesk Messaging iframe is not found",integration:d,question:f,success:!1});window.Forethought("widget","hide"),w();try{window.zE("messenger:set","zIndex",9999999),window.zE("messenger","open")}catch(T){return G({error:q(T),integration:d,question:f,success:!1})}(()=>{try{const e=L(),t=null===e||void 0===e?void 0:e.contentWindow,n=null===t||void 0===t?void 0:t.document.querySelector('button[data-garden-id="buttons.icon_button"]');null===n||void 0===n||n.addEventListener("click",(()=>{u(),window.zE&&window.zE("messenger:set","zIndex",-1),window.Forethought("widget","show")}))}catch(e){console.error(e)}})(),f&&((e,t)=>{let n=!0,i=0;const o=()=>{if(n&&i<=10){var a;n=!1;const c=E.querySelector('iframe[title="Messaging window"]'),l=null===c||void 0===c||null===(a=c.contentWindow)||void 0===a?void 0:a.document.querySelector('textarea[data-garden-id="forms.textarea"]');if(l){var r,s,d;null===(r=Object.getOwnPropertyDescriptor(window.HTMLTextAreaElement.prototype,"value"))||void 0===r||null===(s=r.set)||void 0===s||s.call(l,e),l.dispatchEvent(new Event("change",{bubbles:!0}));const n=null===c||void 0===c||null===(d=c.contentWindow)||void 0===d?void 0:d.document.querySelector('button[data-garden-id="buttons.icon_button"][aria-label="Send message"]');n&&(n.click(),t(!0))}else n=!0,i++,setTimeout(o,3e3)}else t(!1)};o()})(f,(e=>{G(e?{integration:d,question:f,success:!0}:{error:"zdMessagingSendMessage issue",integration:d,question:f,success:!1})}));break;case"zendesk":const{chatTags:s,conversationIdUsedInPreviousSession:_="",ignoreAgentAvailability:F}=n;if(!window.zE)return G({chatTags:s,departmentReceived:i,email:a,error:"window.zE is undefined",ignoreAgentAvailability:F,integration:d,name:m,question:f,success:!1});const R=null===(t=E.getElementById("launcher"))||void 0===t?void 0:t.parentElement;R&&(R.style.display="block");const H=g().filter((e=>"online"===e.status)),B=parseInt(i),D=isNaN(B)?null:B;if(D){var y;const e=g();i=(null===e||void 0===e||null===(y=e.find((e=>e.id===D)))||void 0===y?void 0:y.name)||""}const j=H.some((e=>e.name===i));if(H.length){if(!v&&i&&!j)return G({chatTags:s,departmentReceived:i,departments:g(),email:a,error:"Department is offline",ignoreAgentAvailability:F,integration:d,isReceivedDepartmentOnline:j,name:m,question:f,success:!1});w();try{_&&window.zE("webWidget","chat:removeTags",["ft-conversation-id_".concat(_)]),window.zE("webWidget","open"),window.zE((()=>{if(window.zE){if(m||a)try{window.zE.identify({email:a,name:m})}catch(T){G({chatTags:s,departmentReceived:i,departments:g(),email:a,error:T instanceof Error?T.message:"Unknown window.zE.identify({ email, name }) invocation error",ignoreAgentAvailability:F,integration:d,isReceivedDepartmentOnline:j,name:m,question:f,success:!1})}try{i&&j&&window.zE("webWidget","updateSettings",{webWidget:{chat:{departments:{select:i}}}}),s&&window.zE("webWidget","chat:addTags",s)}catch(T){G({chatTags:s,departmentReceived:i,departments:g(),email:a,error:T instanceof Error?T.message:"Unknown window.zE(...) invocation error",ignoreAgentAvailability:F,integration:d,isReceivedDepartmentOnline:j,name:m,question:f,success:!1})}setTimeout((()=>{if(f&&l)try{var e,t;null===(e=(t=window).zE)||void 0===e||e.call(t,"webWidget","chat:send",f)}catch(T){G({chatTags:s,departmentReceived:i,departments:g(),email:a,error:T instanceof Error?T.message:"Unknown window.zE('webWidget', 'chat:send', question) invocation error",ignoreAgentAvailability:F,integration:d,isReceivedDepartmentOnline:j,name:m,question:f,success:!1})}}),3e3)}}))}catch(T){return G({chatTags:s,departmentReceived:i,departments:g(),email:a,error:T instanceof Error?T.message:"Unknown window.zE(...) invocation error",ignoreAgentAvailability:F,integration:d,isReceivedDepartmentOnline:j,name:m,question:f,success:!1})}G({chatTags:s,departmentReceived:i,departments:window.zE("webWidget:get","chat:departments"),email:a,ignoreAgentAvailability:F,integration:d,isReceivedDepartmentOnline:j,name:m,question:f,success:!0})}else if(F){w();try{window.zE("webWidget","open"),window.zE((()=>{try{var e;if(m||a)null===(e=window.zE)||void 0===e||e.identify({email:a,name:m});s&&window.zE&&window.zE("webWidget","chat:addTags",s),f&&window.zE&&l&&window.zE("webWidget","chat:send",f)}catch(T){G({chatTags:s,departmentReceived:i,departments:g(),email:a,error:T instanceof Error?T.message:"Unknown window.zE(...) invocation error",ignoreAgentAvailability:F,integration:d,isReceivedDepartmentOnline:j,name:m,question:f,success:!1})}}))}catch(T){G({chatTags:s,departmentReceived:i,departments:g(),email:a,error:T instanceof Error?T.message:"Unknown window.zE(...) invocation error",ignoreAgentAvailability:F,integration:d,isReceivedDepartmentOnline:j,name:m,question:f,success:!1})}G({chatTags:s,departmentReceived:i,departments:window.zE("webWidget:get","chat:departments"),email:a,ignoreAgentAvailability:F,integration:d,isReceivedDepartmentOnline:j,name:m,question:f,success:!0})}else G({chatTags:s,departmentReceived:i,departments:window.zE("webWidget:get","chat:departments"),email:a,error:"All departments are offline",ignoreAgentAvailability:F,integration:d,isReceivedDepartmentOnline:j,name:m,question:f,success:!1});break;case"salesforce":const{extraPrechatFormDetails:U=[],manually_click_salesforce_button:K=!1,manually_click_timeout:J=0,...Y}=n;if(!window.embedded_svc)return G({error:"window.embedded_svc is undefined",integration:d,manuallyClickSalesforceButton:K,success:!1});const Z={};if(!k){var C;if(null===(C=window.embedded_svc)||void 0===C||!C.addEventHandler)return G({error:"window.embedded_svc.addEventHandler is undefined",integration:d,manuallyClickSalesforceButton:K,success:!1});window.embedded_svc.addEventHandler("afterDestroy",c),k=!0}r(),window.Forethought("widget","hide");const $={};if(m){const{firstName:e,lastName:t}=(e=>{const t=e.trim().replace(/\s{2,}/g," ").split(" "),n=t.length&&t[0]?t[0]:"";return{firstName:n,lastName:t.length>1?t.slice(1).join(" "):n}})(m);$.Name=m,$.FirstName=e,$.LastName=t}const Q={extraPrechatFormDetails:U,prepopulatedPrechatFields:{Email:a,Subject:f,...$,...Y}};if(Z.startChatFields={...Q},K){var S;let e=!0;if(null===(S=window.embedded_svc)||void 0===S||!S.addEventHandler)return G({error:"window.embedded_svc.addEventHandler is undefined",integration:d,manuallyClickSalesforceButton:K,success:!1});window.embedded_svc.addEventHandler("afterMaximize",(()=>{setTimeout((()=>{if(e){var t;if(null===(t=window.embedded_svc.liveAgentAPI)||void 0===t||!t.startChat)return G({error:"window.embedded_svc.liveAgentAPI.startChat is undefined",integration:d,manuallyClickSalesforceButton:K,success:!1});window.embedded_svc.liveAgentAPI.startChat({...Q}).then((()=>{e=!1}))}}),J)}));const t=document.querySelector("div.embeddedServiceHelpButton button");Z.salesforceChatButton=t,t?(t.click(),G({...Z,integration:d,manuallyClickSalesforceButton:K,success:!0})):G({...Z,error:"Salesforce chat button is not found",integration:d,manuallyClickSalesforceButton:K,success:!1})}else{var A;if(null===(A=window.embedded_svc.liveAgentAPI)||void 0===A||!A.startChat)return G({error:"window.embedded_svc.liveAgentAPI.startChat is undefined",integration:d,manuallyClickSalesforceButton:K,success:!1});window.embedded_svc.liveAgentAPI.startChat({...Q}),G({...Z,integration:d,manuallyClickSalesforceButton:K,success:!0})}break;case"kustomer":if(!window.Kustomer)return G({customFields:{...n.customFields},error:"window.Kustomer is undefined",integration:d,question:f,success:!1});const{availability:X}=window.Kustomer.isChatAvailable();if("disabled"===X||"hidden"===X)return G({customFields:{...n.customFields},error:"Chat is ".concat(X),integration:d,question:f,success:!1,widgetAvailability:X});try{a&&window.Kustomer.describeCustomer({attributes:{emails:[a]}}),window.Kustomer.createConversation({customAttributes:{...n.customFields},message:f},(function(e,t){if(t||!e)throw t;o(d,e.conversationId),h.innerHTML="#kustomer-ui-sdk-iframe { display: block !important;}",E.body.appendChild(h),window.Forethought("widget","hide"),G({customFields:{...n.customFields},integration:d,question:f,success:!0,widgetAvailability:X})}))}catch(M){return G({customFields:{...n.customFields},error:q(M),integration:d,question:f,success:!1})}break;case"intercom":if(!window.Intercom)return G({autoSendConfig:n.autoSendConfig,email:a,error:"window.Intercom is undefined",identityVerificationEnabled:n.identityVerificationEnabled,integration:d,name:m,question:f,success:!1,userid:n.userid});try{b({autoSendConfig:n.autoSendConfig,email:a,identityVerificationEnabled:n.identityVerificationEnabled,name:m,question:f,userid:n.userid})}catch(M){return G({autoSendConfig:n.autoSendConfig,email:a,error:q(M),identityVerificationEnabled:n.identityVerificationEnabled,integration:d,name:m,question:f,success:!1,userid:n.userid})}G({autoSendConfig:n.autoSendConfig,email:a,identityVerificationEnabled:n.identityVerificationEnabled,integration:d,name:m,question:f,success:!0,userid:n.userid});break;case"snap_engage":if(!window.SnapEngage||!window.SnapEngage.startLink||!window.SnapEngage.sendTextToChat)return G({additionalParameters:n,email:a,error:"window.SnapEngage is undefined, or is missing necessary functions",integration:d,name:m,question:f,success:!1});try{W({additionalParameters:n,email:a,name:m,question:f})}catch(M){return G({additionalParameters:n,email:a,error:q(M),integration:d,name:m,question:f,success:!1})}G({additionalParameters:n,email:a,integration:d,name:m,question:f,success:!0});break;case"drift":if(!window.drift)return G({email:a,error:"window.drift is undefined",integration:d,name:m,question:f,success:!1});try{z({email:a,name:m,question:f})}catch(M){return G({email:a,error:q(M),integration:d,name:m,question:f,success:!1})}G({email:a,integration:d,name:m,question:f,success:!0});break;case"generic":try{I(p,{...n}),G({...n,integration:d,success:!0,widgetOption:p},!1)}catch(M){G({...n,error:q(M),integration:d,success:!1,widgetOption:p},!1)}break;case"brand_embassy":const{autoStartSession:ee,customFields:te}=n;if(!window.brandembassy)return G({autoStartSession:ee,customFields:te,error:"window.brandembassy is undefined",integration:d,name:m,question:f,success:!1});try{x({autoStartSession:ee,customFields:te,name:m,question:f})}catch(M){return G({autoStartSession:ee,customFields:te,error:q(M),integration:d,name:m,question:f,success:!1})}G({autoStartSession:ee,customFields:te,integration:d,name:m,question:f,success:!0});break;case"gorgias":if(!window.GorgiasChat)return G({error:"window.GorgiasChat is undefined",integration:d,question:f,success:!1});try{P({question:f})}catch(M){return G({error:q(M),integration:d,question:f,success:!1})}G({integration:d,question:f,success:!0});break;case"freshchat":{const{conversationProperties:e,firstName:t,forethoughtConversationID:i,lastName:o,tags:r}=n;if(!window.fcWidget)return G({error:"window.fcWidget is not found",integration:d,question:f,success:!1,tags:r});try{O({conversationProperties:e,email:a,firstName:t,forethoughtConversationID:i,lastName:o,question:f,tags:r})}catch(M){return G({error:q(M),integration:d,question:f,success:!1,tags:r})}G({integration:d,question:f,success:!0,tags:r});break}case"salesforce_messaging":{const e=n.hiddenFields||{};if(!window.embeddedservice_bootstrap)return G({error:"window.embeddedservice_bootstrap is undefined",hiddenFields:e,integration:d,question:f,success:!1});try{N({hiddenFields:e})}catch(M){return G({error:q(M),hiddenFields:e,integration:d,question:f,success:!1})}G({hiddenFields:e,integration:d,question:f,success:!0});break}case"live_chat":if(void 0===window.LiveChatWidget&&void 0===window.LC_API)return G({email:a,error:"both window.LiveChatWidget and window.LC_API are undefined",integration:"live_chat",name:m,question:f,success:!1});try{window.LiveChatWidget?(e=>{let{email:t,name:n,question:i}=e;window.LiveChatWidget&&(V(),n&&window.LiveChatWidget.call("set_customer_name",n),t&&window.LiveChatWidget.call("set_customer_email",t),window.LiveChatWidget.call("set_session_variables",{"Forethought Transcript":i}),window.LiveChatWidget.call("maximize"))})({email:a,name:m,question:f}):window.LC_API&&(e=>{let{email:t,name:n,question:i}=e;if(!window.LC_API)return;V(),n&&window.LC_API.set_visitor_name(n),t&&window.LC_API.set_visitor_email(t);const o=[{name:"Forethought Transcript",value:i}];window.LC_API.set_custom_variables(o),window.LC_API.open_chat_window()})({email:a,name:m,question:f})}catch(M){return G({email:a,error:q(M),integration:"live_chat",name:m,question:f,success:!1})}G({email:a,integration:"live_chat",name:m,question:f,success:!0});break;default:G({error:"Unknown integration: ".concat(d),integration:d,question:f,success:!1})}},G=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];console.log("Forethought ".concat(e.integration," handoff"),e),i({event:"handoffStatus",hideWidget:t,success:e.success}),i({event:"handoffTrackingEvent",handoffData:e})};window.addEventListener("message",(e=>{const t=e.data,n=null===t||void 0===t?void 0:t.data,i=null===t||void 0===t?void 0:t.method;"liveagent.restored"===i&&window.embedded_svc.liveAgentAPI.browserSessionInfo.activeChatSessions&&window.Forethought("widget","hide"),"liveagent.initialized"===i&&(r(),window.Forethought("widget","hide")),"chasitorChatEstablished"===(null===n||void 0===n?void 0:n.event)&&d()})),window.addEventListener("message",(e=>{if((e=>Boolean((e.origin===n||"*"===n)&&e.data))(e))return"forethoughtWidgetLoaded"===e.data.event?(window.zE&&v((()=>m(window.zE))),window.LC_API?v(j).then((e=>{e||D()})):D(),s(),h.innerHTML="#kustomer-ui-sdk-iframe { display: none !important;}",E.body.appendChild(h),"false"!==A&&(()=>{const e={...window.intercomSettings,hide_default_launcher:!0};window.intercomSettings={...e},window.Intercom&&(window.Intercom("hide"),window.Intercom("update",{...e})),f.innerHTML="\n      .intercom-launcher {display: none !important;}\n      .intercom-messenger-frame {display: none !important;}\n      .intercom-lightweight-app {display: none !important;}\n    ",E.body.appendChild(f)})(),T(),window.drift&&window.drift.hide(),M.innerHTML="#be-frame {display: none !important;}",E.body.appendChild(M),F.innerHTML="#gorgias-chat-container {display: none !important;}",E.body.appendChild(F),R.innerHTML="#fc_frame {display: none !important;}",E.body.appendChild(R),H.innerHTML="#embedded-messaging {display: none !important;}",void E.body.appendChild(H)):void("forethoughtWidgetIntegrationHandoff"!==e.data.event||U(e.data))}))};Array.from=t(),function(e){let t={height:"0",width:"0"},n=!1,i=!1;const o=window.document,a=o.currentScript;if(!a)throw new Error("FT: Could not find embed script");const r=a.getAttribute("data-api-key");if(!r)return;const s=a.getAttribute("full-screen"),d=a.getAttribute("hidden"),c="true"===a.getAttribute("data-builder-preview"),l="true"===a.getAttribute("data-solve-config-preview"),u=a.getAttribute("offset-y")||"0px",w=a.getAttribute("data-workflow-version"),h=null===(e=a.getAttribute("src"))||void 0===e?void 0:e.replace("embed.js",""),f={};Array.from(a.attributes).forEach((e=>{const t=e.nodeValue,n="null"===t;f[e.nodeName]=n?null:t}));const p=function(){var e;const p=o.createElement("iframe");p.setAttribute("id","forethought-chat"),p.setAttribute("name","Virtual Assistant Chat"),p.setAttribute("title","Virtual Assistant Chat"),p.setAttribute("allowfullscreen","allowfullscreen"),p.setAttribute("mozallowfullscreen","mozallowfullscreen"),p.setAttribute("msallowfullscreen","msallowfullscreen"),p.setAttribute("oallowfullscreen","oallowfullscreen"),p.setAttribute("webkitallowfullscreen","webkitallowfullscreen"),p.setAttribute("sandbox","allow-scripts allow-popups allow-top-navigation-by-user-activation allow-same-origin allow-popups-to-escape-sandbox allow-downloads allow-top-navigation");const v=Object.fromEntries(Array.from(a.getAttributeNames(),(e=>[e,a.getAttribute(e)||""]))),E=new URLSearchParams(v);p.setAttribute("src",h+"?v=2#".concat(E)),p.setAttribute("style",g),o.body.appendChild(p);const C=h?new URL(h).origin:"*",S=e=>{var t;null===(t=p.contentWindow)||void 0===t||t.postMessage(e,C)},A=e=>{p.setAttribute("style",g+e)};function _(e){let{height:t,width:n}=e;p.setAttribute("style","".concat(g,"\n        width: ").concat(n,";\n        height: ").concat(t,";"))}const k=()=>{p.hidden=!0},q=()=>{const e=b.matches,t=y;n&&e?S({isMobile:!0,isSmallScreen:!1}):!n||e||c||S({isMobile:!1,isSmallScreen:t.matches})},L=()=>{if(!i)if(q(),n){b.matches?A(m):function(){if(c){const e="max-width: ".concat(380,"px");A("\n  width: 100%;\n  right: 0;\n  height: calc(100% - 69px);\n  max-height: initial;\n  bottom: 0;\n  z-index: 1199;\n  border-radius: 12px 0 0 12px;\n"+e)}else{const e="428px",t="48px",n="24px";_({height:"0px"===u?"calc(90% - ".concat(u," - ").concat(t,")"):"calc(100% - ".concat(u," + ").concat(n,")"),width:e})}}()}else"0"===t.width?_({height:"100%",width:"calc(280px + 48px)"}):_(t)},W=()=>{p.hidden=!1,n||S({action:"showIframe"})},z=()=>window.document.getElementById("forethought-chat"),I=()=>{var e,t;return{offsetLeft:(null===(e=window.visualViewport)||void 0===e?void 0:e.offsetLeft)||0,offsetTop:(null===(t=window.visualViewport)||void 0===t?void 0:t.offsetTop)||0}};window.addEventListener("message",(e=>{var o;if(o=e,Boolean((o.origin===C||"*"===C)&&o.data))switch(e.data.event){case"hideSolveWidget":k();break;case"showSolveWidget":W();break;case"hideIframeWidget":z()&&k();break;case"showIframeWidget":z()&&W();break;case"forethoughtWidgetOpened":n=!0,L();break;case"forethoughtWidgetClosed":n=!1,L();break;case"forethoughtWidgetStartedInitializing":const o=b.matches,a=y;o?S({isMobile:!0,isSmallScreen:!1}):o||S({isMobile:!1,isSmallScreen:a.matches}),"true"===s&&S({action:"openWidget"}),d&&k(),S({API_KEY:r,href:window.location.href,isBuilderPreview:c,isSolveConfigPreview:l,origin:window.location.origin,rawParams:f,workflowVersion:w}),q();break;case"forethoughtWidgetLoaded":n=e.data.isOpen,L(),"function"===typeof b.addEventListener?(b.addEventListener("change",L),y.addEventListener("change",L)):(b.addListener(L),y.addListener(L));break;case"forethoughtWidgetResize":if(n)return;const{height:u,width:g}=e.data.dimensions;u&&g&&(t={height:u,width:g},_(t));break;case"forethoughtWidgetViewImage":e.data.open?(i=!0,A(m)):(i=!1,L())}})),null===(e=window.visualViewport)||void 0===e||e.addEventListener("scroll",(()=>{S({event:"forethoughtSetVisualViewport",payload:I()})})),window.Forethought=(e,t,n)=>{if("widget"===e){if("open"===t&&S({action:"openWidget"}),"close"===t&&S({action:"closeWidget"}),"hide"===t&&k(),"show"===t&&W(),"triggerEventComplete"===t){const e=null===n||void 0===n?void 0:n.identifier,i=(null===n||void 0===n?void 0:n.payload)||{};e?S({event:t,identifier:e,payload:i}):console.error("TRIGGER EVENT ERROR - event name is required at data.identifier")}"clearLocalData"===t&&S({action:"clearLocalData"})}},T()};"complete"===o.readyState||"interactive"===o.readyState?p():o.addEventListener("DOMContentLoaded",p)}()})()})();
//# sourceMappingURL=embed.js.map